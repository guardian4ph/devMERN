"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react");function t(){return(t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var n=function(t){var n=e.useRef(t);return e.useEffect((function(){n.current=t})),n},o="ðŸ’¡ use-places-autocomplete: Please provide a place Id when using getDetails() either as a string or as part of an Autocomplete Prediction.";exports.default=function(o){var r,a,u,s=void 0===o?{}:o,c=s.requestOptions,l=s.debounce,i=void 0===l?200:l,d=s.googleMaps,p=s.callbackName,f=s.defaultValue,g=void 0===f?"":f,m=e.useState(!1),v=m[0],w=m[1],h=e.useState(g),P=h[0],y=h[1],b=e.useState({loading:!1,status:"",data:[]}),O=b[0],S=b[1],x=e.useRef(null),_=n(c),k=n(d),C=e.useCallback((function(){var e,t=window.google,n=k.current,o=(null==n?void 0:n.places)||(null==t||null==(e=t.maps)?void 0:e.places);o?(x.current=new o.AutocompleteService,w(!0)):console.error("ðŸ’¡ use-places-autocomplete: Google Maps Places API library must be loaded. See: https://github.com/wellyshen/use-places-autocomplete#load-the-library")}),[]),j=e.useCallback((function(){S({loading:!1,status:"",data:[]})}),[]),A=e.useCallback((r=function(e){e?(S((function(e){return t({},e,{loading:!0})})),x.current.getPlacePredictions(t({},_.current,{input:e}),(function(e,t){S({loading:!1,status:t,data:e||[]})}))):j()},a=i,function(){for(var e=this,t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];null!==u&&(clearTimeout(u),u=null),u=setTimeout((function(){return r.apply(e,n)}),a)}),[i,j]),E=e.useCallback((function(e,t){void 0===t&&(t=!0),y(e),t&&A(e)}),[A]);return e.useEffect((function(){var e=window.google;return k.current||null!=e&&e.maps||!p?C():window[p]=C,function(){window[p]&&delete window[p]}}),[p,C]),{ready:v,value:P,suggestions:O,setValue:E,clearSuggestions:j}},exports.getDetails=function(e){var t=new window.google.maps.places.PlacesService(document.createElement("div"));return e.placeId?new Promise((function(n,o){t.getDetails(e,(function(e,t){"OK"!==t&&o(t),n(e)}))})):(console.error(o),Promise.reject(o))},exports.getGeocode=function(e){var t=new window.google.maps.Geocoder;return new Promise((function(n,o){t.geocode(e,(function(t,r){"OK"!==r&&o(r),!e.address&&e.componentRestrictions&&(console.error("ðŸ’¡ use-places-autocomplete: Please provide an address when using getGeocode() with the componentRestrictions."),n(t)),n(t)}))}))},exports.getLatLng=function(e){return new Promise((function(t,n){try{var o=e.geometry.location,r=o.lat,a=o.lng;t({lat:r(),lng:a()})}catch(e){n(e)}}))},exports.getZipCode=function(e,t){return new Promise((function(n,o){try{var r=null;e.address_components.forEach((function(e){var n=e.long_name,o=e.short_name;e.types.includes("postal_code")&&(r=t?o:n)})),n(r)}catch(e){o(e)}}))};
